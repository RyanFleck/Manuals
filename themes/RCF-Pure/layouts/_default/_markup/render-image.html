<!-- Render an Image -->
<!-- https://stackoverflow.com/questions/69031332/hugo-shortcode-adding-extra-space-at-end-of-link-text -->
<!-- Put loading=lazy before src to avoid a firefox bug. -->
<figure>
  <a href="{{ .Destination | safeURL }}"  target="_blank" rel="noopener noreferrer">
    <img loading="lazy" 
         src="{{ .Destination | safeURL }}" 
         alt="{{ .Text | plainify }}" {{ with .Title}} 
         title="{{ . | plainify }}"{{ end }} 
         class="md-image {{ if (strings.Contains .Destination "invert=t") }} invert{{ end -}} {{ if (strings.Contains .Destination "dim=t") }} dim{{ end -}}" />
  </a>

  {{ if .Title }}
  <figcaption><i class="fa-solid fa-chevron-up"></i> {{ .Title | safeHTML }}</figcaption>
  {{ else if .Text }} 
  <figcaption><i class="fa-solid fa-chevron-up"></i> {{ .Text | safeHTML }}</figcaption>
  {{ end }}
</figure>
{{- "" -}}
